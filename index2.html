<html>

<head>
    <title>Game</title>
    <script type="text/javascript" src="js/ndollar.js"></script>
    <script type="text/javascript" src="js/phaser.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="js/shapeN.js"></script>
</head>

<body>
    <script>

        var game = new Phaser.Game(800, 600, Phaser.CANVAS, 'phaser-example', { preload: preload, create: create, update: update });
        var turn = 0;

        var bitmapW = 400;
        var bitmapH = 300;
        var posX = 0;
        var posY = 0;
        var shape;
        var lecters;

        function preload() {
            game.load.image('fumetto', '../assets/fumetto.jpg');
            game.load.image('button', '../assets/button.png');

        }

        function create() {
            shape = new Shape(posX, posY, bitmapW, bitmapH,game.cache.getImage('fumetto'));
            shape.initializeBitmapData();
            lecters = game.add.group();
            lecters.enableBody = true;
            lecter = lecters.create(0, 0, shape.bmd);
            button1 = game.add.button(0,500, 'button', recognize, this, 2, 1, 0);
        }


        function update() {
            if (game.input.activePointer.isDown) {
                turn=shape.captureInputData();
            }

            if (game.input.activePointer.isUp) {
                if (turn == 1) {
                    shape.saveStroke();
                    shape.stroke=false;
                    turn = 0;
                }
            }
        }

        function recognize(){
            var res=shape.checkInputData();
            alert(res.type + " " + res.point);
        }


      </script>
   </body>
</html>

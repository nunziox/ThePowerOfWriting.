<html>

<head>
    <title>Game</title>
    <script type="text/javascript" src="js/phaser.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery/jquery-1.5.min.js"></script>
    <script type="text/javascript" src="js/ndollar.js"></script>
    <script src="js/shapeN.js"></script>
</head>

<body>
    <script>

        var JsonObj;
        var game = new Phaser.Game(800,600, Phaser.CANVAS, 'phaser-example', { preload: preload, create: create, update: update });
        var turn = 0;

        var bitmapW = 500;
        var bitmapH = 300;
        var posX = 100;
        var posY = 100;
        var shape;
        var lecters;
        
        var req = new XMLHttpRequest();
        req.open('GET', 'pointsN.json', false);
        req.send(null);
        if (req.status === 200) {
           JsonObj = JSON.parse(req.responseText);
        }

        function preload() {
            game.load.image('fumetto', 'assets/fumetto.jpg');
            game.load.image('button', 'assets/button.png');

        }

        function create() {
            shape = new Shape(posX, posY, bitmapW, bitmapH,game.cache.getImage('fumetto'));
            shape.setLecter("T");
            shape.setTextSize(50);
            shape.numex = 10;
            shape.initializeBitmapData();
            lecters = game.add.group();
            lecters.enableBody = true;
            lecter = lecters.create(posX, posY, shape.bmd);
            button1 = game.add.button(0,500, 'button', recognize, this, 2, 1, 0);
        }


        function update() {
            if (game.input.activePointer.isDown) {
                turn=shape.captureInputData();
            }

            if (game.input.activePointer.isUp) {
                if (turn == 1) {
                    shape.saveStroke();
                    shape.stroke=false;
                    turn = 0;
                }
            }
        }

        function recognize(){
            var res=shape.checkInputData();
            ///alert(res.type + " " + res.point);
        }


      </script>
   </body>
</html>

<html>

<head>
    <title>Game</title>
    <script type="text/javascript" src="js/dollar.js"></script>
    <script type="text/javascript" src="js/phaser.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="js/shape.js"></script>
</head>

<body>
    <script>

        var game = new Phaser.Game(800, 600, Phaser.CANVAS, 'phaser-example', { preload: preload, create: create, update: update });
        var turn = 0;

        var bitmapW = 400;
        var bitmapH = 300;
        var posX = 0;
        var posY = 0;
        var shape;
        var lecters;

        function preload() {
            game.load.image('fumetto', '../assets/fumetto.jpg');

        }

        function create() {
            shape = new Shape(posX, posY, bitmapW, bitmapH);
            shape.initializeBitmapData(game.cache.getImage('fumetto'), "left square bracket");
            lecters = game.add.group();
            lecters.enableBody = true;
            lecter = lecters.create(0, 0, shape.bmd);
        }


        function update() {


            if (game.input.activePointer.isDown) {
                turn=shape.captureInputData();
            }

            if (game.input.activePointer.isUp) {
                if (turn == 1) {
                    var res = shape.checkInputData();
                    if (res.point == 0 && res.npoint == 0) {
                        alert("Error!");
                    } else {
                        alert(" PunteggioTot:(" + (res.point / (res.npoint) * 100) + ")." + " Figura:" + res.type);
                    }
                    turn = 0;
                }
            }
        }


      </script>
   </body>
</html>
